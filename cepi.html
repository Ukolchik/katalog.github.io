<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–¶–µ–ø–∏</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #topBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 999;
      font-size: 24px;
      background-color: #444;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }
    #topBtn:hover { background-color: #222; }

    .add-to-cart {
      display: inline-block;
      margin-top: 6px;
      background-color: #013077;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: 0.3s;
    }
    .add-to-cart:hover { background-color: #005fa3; }
    .add-to-cart:disabled { background-color: #2ecc71; cursor: default; }

    .item { text-align: center; margin-bottom: 20px; }
    .item img { max-width: 100%; height: auto; border-radius: 6px; }
    .item p { margin: 8px 0 4px; }

    .cart-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      cursor: pointer;
      font-size: 28px;
    }
    .cart-count {
      background-color: red;
      color: white;
      border-radius: 50%;
      padding: 2px 8px;
      font-size: 14px;
      position: absolute;
      top: -10px;
      right: -10px;
    }
  </style>
</head>
<body>
<header>
  <h1>–ö–∞—Ç–∞–ª–æ–≥</h1>
  <a href="index.html" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
  <p>–¢–µ–ª. +7 (910) 985-11-85</p>
  <div class="cart-icon" onclick="location.href='cart.html'">
    üõí<span id="cart-count" class="cart-count">0</span>
  </div>
</header>

<main class="gallery" id="gallery"></main>

<div id="modal" class="modal" onclick="closeModal()">
  <span class="close" onclick="closeModal()">&times;</span>
  <img class="modal-content" id="modal-img" />
</div>

<button onclick="scrollToTop()" id="topBtn" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

<div class="order-info">
  –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑, <br>–≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:<br>
  <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> <a href="tel:+79109851185">+7 (910) 985-11-85</a><br>
  <b>WhatsApp / Telegram:</b> <a href="https://wa.me/79109851185" target="_blank">+7 (910) 985-11-85</a><br>
  <b>E-mail:</b> <a href="mailto:artos-iv@mail.ru">artos-iv@mail.ru</a>
</div>

<script>
  const chains = [
    { file: "–ë–∏—Å–º–∞—Ä–∫ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1.jpeg", name: "–ë–∏—Å–º–∞—Ä–∫ –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.5, 0.7, 1] },
    { file: "–ö–æ–ª–æ—Å_0,4.jpeg", name: "–ö–æ–ª–æ—Å", widths: [0.4] },
    { file: "–ö–æ—Ä–¥–æ–≤–∞—è –¥–≤–æ–π–Ω–∞—è_0,4.jpeg", name: "–ö–æ—Ä–¥–æ–≤–∞—è –¥–≤–æ–π–Ω–∞—è", widths: [0.4] },
    { file: "–ö–æ—Ä–¥–æ–≤–∞—è —Ç—Ä–æ–π–Ω–∞—è_0,35 0,5.jpeg", name: "–ö–æ—Ä–¥–æ–≤–∞—è —Ç—Ä–æ–π–Ω–∞—è", widths: [0.35, 0.5] },
    { file: "–õ–∞–≤ –≥—Ä–∞–Ω–µ–Ω–∞—è_0,4 0,5.jpeg", name: "–õ–∞–≤ –≥—Ä–∞–Ω–µ–Ω–∞—è", widths: [0.4, 0.5] },
    { file: "–ù–æ–Ω–Ω–∞ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg", name: "–ù–æ–Ω–Ω–∞ –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.7] },
    { file: "–ü–∞–Ω—Ü–∏—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-1,2.jpeg", name: "–ü–∞–Ω—Ü–∏—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 1.2] },
    { file: "–ü–∞–Ω—Ü–∏—Ä—å –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,8.jpeg", name: "–ü–∞–Ω—Ü–∏—Ä—å –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.8] },
    { file: "–ü–∞–Ω—Ü–∏—Ä—å –ø–ª–æ—Å–∫–∏–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,6-1,5.jpg", name: "–ü–∞–Ω—Ü–∏—Ä—å –ø–ª–æ—Å–∫–∏–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.6, 1.5] },
    { file: "–†–æ–º–± –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,9.jpeg", name: "–†–æ–º–± –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.9] },
    { file: "–†–æ–º–± —Ç—Ä–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg", name: "–†–æ–º–± —Ç—Ä–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.7] },
    { file: "–°–∏–Ω–≥–∞–ø—É—Ä_0,3 0,4 0,5.jpeg", name: "–°–∏–Ω–≥–∞–ø—É—Ä", widths: [0.3, 0.4, 0.5] },
    { file: "–¢–∏–≥—Ä–æ–≤—ã–π –≥–ª–∞–∑_0,6.jpeg", name: "–¢–∏–≥—Ä–æ–≤—ã–π –≥–ª–∞–∑", widths: [0.6] },
    { file: "–£–ª–∏—Ç–∫–∞_0,6 0,8.jpeg", name: "–£–ª–∏—Ç–∫–∞", widths: [0.6, 0.8] },
    { file: "–Ø–∫–æ—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1,2.jpeg", name: "–Ø–∫–æ—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.5, 1.2] },
    { file: "–Ø–∫–æ—Ä—å –ø–ª–æ—Å–∫–∏–π_0,5 0,6 0,7.jpeg", name: "–Ø–∫–æ—Ä—å –ø–ª–æ—Å–∫–∏–π", widths: [0.5,0.6,0.7] }
  ];

  const gallery = document.getElementById("gallery");

  function getCart() { return JSON.parse(localStorage.getItem("cart")) || []; }
  function saveCart(cart) { localStorage.setItem("cart", JSON.stringify(cart)); }
  function updateCartCount() { document.getElementById("cart-count").textContent = getCart().length; }

  function addToCart(button, chain) {
    const cart = getCart();
    cart.push({
      name: chain.name,
      type: 'chain',
      length: 40,
      width: chain.widths[0],
      availableWidths: chain.widths,
      qty: 1
    });
    saveCart(cart);
    updateCartCount();
    button.textContent = "‚úì";
    button.disabled = true;
  }

  function markAddedProducts() {
    const cart = getCart();
    document.querySelectorAll(".add-to-cart").forEach(btn => {
      const productName = btn.getAttribute("data-name");
      if(cart.some(item => item.name === productName)){
        btn.textContent = "‚úì";
        btn.disabled = true;
      }
    });
  }

  chains.forEach(chain => {
    const rawName = chain.file.split('/').pop().replace(/\.[^/.]+$/, "");
    const displayName = rawName.replace(/[_]/, '<br>');
    const src = `images/—Ü–µ–ø–∏/${chain.file}`;

    const item = document.createElement("div");
    item.className = "item";
    item.innerHTML = `
      <img src="${src}" alt="${rawName}" onclick="openModal(this.src)" />
      <p>${displayName}</p>
      <button class="add-to-cart" data-name="${chain.name}" onclick='addToCart(this, ${JSON.stringify(chain)})'>–î–æ–±–∞–≤–∏—Ç—å</button>
    `;
    gallery.appendChild(item);
  });

  function openModal(src){ document.getElementById("modal-img").src = src; document.getElementById("modal").style.display = "flex"; }
  function closeModal(){ document.getElementById("modal").style.display = "none"; }

  window.onscroll = function(){
    document.getElementById("topBtn").style.display = (document.documentElement.scrollTop > 300) ? "block" : "none";
  }
  function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }

  updateCartCount();
  markAddedProducts();
</script>
</body>
</html>
