<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–¶–µ–ø–∏</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <a href="index.html" class="btn-back">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
  <div class="cart-icon" onclick="location.href='cart.html'">
    üõí <span id="cart-count" class="cart-count">0</span>
  </div>
</header>

<main class="gallery" id="gallery"></main>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
<div id="productModal" class="modal" onclick="closeProductModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <span class="close" onclick="closeProductModal()">&times;</span>
    <img id="productImg" src="" alt="">
    <div class="info">
      <h2 id="productTitle"></h2>
      <div class="actions">
        <label>–®–∏—Ä–∏–Ω–∞:
          <select id="productWidth"></select>
        </label>
        <label>–î–ª–∏–Ω–∞:
          <select id="productLength"></select>
        </label>
        <div>
          <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
          <input type="number" id="productQty" value="0" min="0">
        </div>
        <button id="productAddBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–≤–µ—Ä—Ö" -->
<button onclick="scrollToTop()" id="topBtn" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
<div id="notify" class="notify">‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É</div>

<div class="order-info">
  –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑, <br>–≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:<br>
  <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> <a href="tel:+79109851185">+7 (910) 985-11-85</a><br>
  <b>WhatsApp / Telegram:</b> <a href="https://wa.me/79109851185" target="_blank">+7 (910) 985-11-85</a><br>
  <b>E-mail:</b> <a href="mailto:artos-iv@mail.ru">artos-iv@mail.ru</a>
</div>

<script>
const chains = [
  { file: "–ë–∏—Å–º–∞—Ä–∫ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1.jpeg", name: "–ë–∏—Å–º–∞—Ä–∫ –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.5, 0.6, 0.7, 0.8, 0.9, 1] },
  { file: "–ö–æ–ª–æ—Å_0,4.jpeg", name: "–ö–æ–ª–æ—Å", widths: [0.4] },
  { file: "–ö–æ—Ä–¥–æ–≤–∞—è –¥–≤–æ–π–Ω–∞—è_0,4.jpeg", name: "–ö–æ—Ä–¥–æ–≤–∞—è –¥–≤–æ–π–Ω–∞—è", widths: [0.4] },
  { file: "–ö–æ—Ä–¥–æ–≤–∞—è —Ç—Ä–æ–π–Ω–∞—è_0,35 0,5.jpeg", name: "–ö–æ—Ä–¥–æ–≤–∞—è —Ç—Ä–æ–π–Ω–∞—è", widths: [0.35, 0.5] },
  { file: "–õ–∞–≤ –≥—Ä–∞–Ω–µ–Ω–∞—è_0,4 0,5.jpeg", name: "–õ–∞–≤ –≥—Ä–∞–Ω–µ–Ω–∞—è", widths: [0.4, 0.5] },
  { file: "–ù–æ–Ω–Ω–∞ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg", name: "–ù–æ–Ω–Ω–∞ –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.5, 0.6, 0.7] },
  { file: "–ü–∞–Ω—Ü–∏—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-1,2.jpeg", name: "–ü–∞–Ω—Ü–∏—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2] },
  { file: "–ü–∞–Ω—Ü–∏—Ä—å –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,8.jpeg", name: "–ü–∞–Ω—Ü–∏—Ä—å –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.8] },
  { file: "–ü–∞–Ω—Ü–∏—Ä—å –ø–ª–æ—Å–∫–∏–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,6-1,5.jpg", name: "–ü–∞–Ω—Ü–∏—Ä—å –ø–ª–æ—Å–∫–∏–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.4, 1.5] },
  { file: "–†–æ–º–± –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,9.jpeg", name: "–†–æ–º–± –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.5, 0.6, 0.7, 0.8, 0.9] },
  { file: "–†–æ–º–± —Ç—Ä–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg", name: "–†–æ–º–± —Ç—Ä–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.4, 0.5, 0.6, 0.7] },
  { file: "–°–∏–Ω–≥–∞–ø—É—Ä_0,3 0,4 0,5.jpeg", name: "–°–∏–Ω–≥–∞–ø—É—Ä", widths: [0.3, 0.4, 0.5] },
  { file: "–¢–∏–≥—Ä–æ–≤—ã–π –≥–ª–∞–∑_0,6.jpeg", name: "–¢–∏–≥—Ä–æ–≤—ã–π –≥–ª–∞–∑", widths: [0.6] },
  { file: "–£–ª–∏—Ç–∫–∞_0,6 0,8.jpeg", name: "–£–ª–∏—Ç–∫–∞", widths: [0.6, 0.8] },
  { file: "–Ø–∫–æ—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1,2.jpeg", name: "–Ø–∫–æ—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π", widths: [0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2] },
  { file: "–Ø–∫–æ—Ä—å –ø–ª–æ—Å–∫–∏–π_0,5 0,6 0,7.jpeg", name: "–Ø–∫–æ—Ä—å –ø–ª–æ—Å–∫–∏–π", widths: [0.5, 0.6, 0.7] }
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];
const cartCount = document.getElementById("cart-count");
function updateCartCount(){ cartCount.textContent = cart.reduce((a,b)=>a+b.qty,0); }

let currentProduct = null;

function openProductModal(src, chain){
  currentProduct = chain;
  document.getElementById("productImg").src = src;
  document.getElementById("productTitle").textContent = chain.name;

  // —Å–µ–ª–µ–∫—Ç–æ—Ä —à–∏—Ä–∏–Ω—ã
  const widthSelect = document.getElementById("productWidth");
  widthSelect.innerHTML = "";
  chain.widths.forEach(w=>{
    let opt = document.createElement("option");
    opt.value = w;
    opt.textContent = w + " –º–º";
    widthSelect.appendChild(opt);
  });

  // —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª–∏–Ω—ã
  const lengthSelect = document.getElementById("productLength");
  lengthSelect.innerHTML = "";
  [40,45,50,55,60,65,70].forEach(l=>{
    let opt = document.createElement("option");
    opt.value = l;
    opt.textContent = l + " —Å–º";
    lengthSelect.appendChild(opt);
  });

  document.getElementById("productQty").value = 0;
  document.getElementById("productModal").style.display = "flex";
}

function closeProductModal(){ document.getElementById("productModal").style.display = "none"; }

// —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
function showNotify() {
  const notify = document.getElementById("notify");
  notify.style.display = "block";
  setTimeout(() => {
    notify.style.display = "none";
  }, 2800);
}

document.getElementById("productAddBtn").onclick = () => {
  let qty = parseInt(document.getElementById("productQty").value);
  if(qty<=0) return;

  let width = parseFloat(document.getElementById("productWidth").value);
  let length = parseInt(document.getElementById("productLength").value);

  let item = cart.find(i=>i.name===currentProduct.name && i.width===width && i.length===length);
  if(item){ item.qty += qty; }
  else{ cart.push({name: currentProduct.name, type:'chain', width, length, qty, availableWidths: currentProduct.widths}); }

  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();
  showNotify(); // ‚ö° —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
};

const gallery = document.getElementById("gallery");
chains.forEach(chain=>{
  const rawName = chain.file.replace(/\.[^/.]+$/,"");
  const src = `images/—Ü–µ–ø–∏/${chain.file}`;
  const item = document.createElement("div");
  item.className="item";
  item.innerHTML = `
    <img src="${src}" alt="${rawName}" onclick='openProductModal("${src}", ${JSON.stringify(chain)})'>
    <p>${chain.name}</p>
  `;
  gallery.appendChild(item);
});

window.onscroll = () => {
  document.getElementById("topBtn").style.display = document.documentElement.scrollTop>300 ? "block":"none";
}
function scrollToTop(){ window.scrollTo({top:0,behavior:'smooth'}); }

updateCartCount();
</script>

</body>
</html>


