<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–¶–µ–ø–∏</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #topBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 999;
      font-size: 24px;
      background-color: #444;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }
    #topBtn:hover {
      background-color: #222;
    }

    /* –∫–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É */
    .add-to-cart {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background-color: #013077;
      color: white;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: 0.3s;
    }
    .add-to-cart:hover {
      background-color: #005fa3;
    }

    .add-to-cart:disabled {
      background-color: #2ecc71; /* –∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ */
      cursor: default;
    }

    .item {
      position: relative;
    }

    /* –∫–æ—Ä–∑–∏–Ω–∞ –≤ —Ö–µ–¥–µ—Ä–µ */
    .cart-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      cursor: pointer;
      font-size: 28px;
    }

    .cart-count {
      background-color: red;
      color: white;
      border-radius: 50%;
      padding: 2px 8px;
      font-size: 14px;
      position: absolute;
      top: -10px;
      right: -10px;
    }
  </style>
</head>
<body>

  <header>
    <h1>–ö–∞—Ç–∞–ª–æ–≥</h1>
    <a href="index.html" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <p>–¢–µ–ª. +7 (910) 985-11-85</p>

    <!-- –∫–æ—Ä–∑–∏–Ω–∞ -->
    <div class="cart-icon" onclick="location.href='cart.html'">
      üõí
      <span id="cart-count" class="cart-count">0</span>
    </div>
  </header>

  <main class="gallery" id="gallery"></main>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div id="modal" class="modal" onclick="closeModal()">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modal-img" />
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–≤–µ—Ä—Ö" -->
  <button onclick="scrollToTop()" id="topBtn" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

  <div class="order-info">
    –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑, <br>–≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:<br>
    <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> <a href="tel:+79109851185">+7 (910) 985-11-85</a><br>
    <b>WhatsApp / Telegram:</b> <a href="https://wa.me/79109851185" target="_blank">+7 (910) 985-11-85</a><br>
    <b>E-mail:</b> <a href="mailto:artos-iv@mail.ru">artos-iv@mail.ru</a>
  </div>

  <script>
    const imageFiles = [
      "–ë–∏—Å–º–∞—Ä–∫ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1.jpeg",
      "–ö–æ–ª–æ—Å_0,4.jpeg",
      "–ö–æ—Ä–¥–æ–≤–∞—è –¥–≤–æ–π–Ω–∞—è_0,4.jpeg",
      "–ö–æ—Ä–¥–æ–≤–∞—è —Ç—Ä–æ–π–Ω–∞—è_0,35 0,5.jpeg",
      "–õ–∞–≤ –≥—Ä–∞–Ω–µ–Ω–∞—è_0,4 0,5.jpeg",
      "–ù–æ–Ω–Ω–∞ –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg",
      "–ü–∞–Ω—Ü–∏—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-1,2.jpeg",
      "–ü–∞–Ω—Ü–∏—Ä—å –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,8.jpeg",
      "–ü–∞–Ω—Ü–∏—Ä—å –ø–ª–æ—Å–∫–∏–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,6-1,5.jpg",
      "–†–æ–º–± –¥–≤–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,9.jpeg",
      "–†–æ–º–± —Ç—Ä–æ–π–Ω–æ–π –≥—Ä–∞–Ω–µ–Ω—ã–π_0,4-0,7.jpeg",
      "–°–∏–Ω–≥–∞–ø—É—Ä_0,3 0,4 0,5.jpeg",
      "–¢–∏–≥—Ä–æ–≤—ã–π –≥–ª–∞–∑_0,6.jpeg",
      "–£–ª–∏—Ç–∫–∞_0,6 0,8.jpeg",
      "–Ø–∫–æ—Ä—å –≥—Ä–∞–Ω–µ–Ω—ã–π_0,5-1,2.jpeg",
      "–Ø–∫–æ—Ä—å –ø–ª–æ—Å–∫–∏–π_0,5 0,6 0,7.jpeg"
    ];

    const gallery = document.getElementById("gallery");

    imageFiles.forEach(file => {
      const rawName = file.split('/').pop().replace(/\.[^/.]+$/, "");
      const displayName = rawName.replace(/[_]/, '<br>');
      const src = `images/—Ü–µ–ø–∏/${file}`;
      const cleanName = displayName.replace(/<br>/g, ' ');

      const item = document.createElement("div");
      item.className = "item";
      item.innerHTML = `
        <img src="${src}" alt="${rawName}" onclick="openModal(this.src)" />
        <p>${displayName}</p>
        <button class="add-to-cart" onclick="addToCart(this, '${cleanName}')">+</button>
      `;
      gallery.appendChild(item);
    });

    function openModal(src) {
      document.getElementById("modal-img").src = src;
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    window.onscroll = function () {
      const btn = document.getElementById("topBtn");
      btn.style.display = (document.documentElement.scrollTop > 300) ? "block" : "none";
    };

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å qty = 1
    function addToCart(button, productName) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      // –∏—â–µ–º —Ç–æ–≤–∞—Ä
      const existing = cart.find(item => item.name === productName);

      if (!existing) {
        cart.push({ name: productName, qty: 1 });
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();

        // –º–µ–Ω—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≥–∞–ª–æ—á–∫—É
        button.textContent = "‚úì";
        button.disabled = true;
      }
    }

    // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      document.getElementById("cart-count").textContent = cart.length;
    }

    // –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ‚Äî –æ—Ç–º–µ—á–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
    function markAddedProducts() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      document.querySelectorAll(".add-to-cart").forEach(btn => {
        const productName = btn.getAttribute("onclick").match(/'(.*?)'/)[1];
        if (cart.some(item => item.name === productName)) {
          btn.textContent = "‚úì";
          btn.disabled = true;
        }
      });
    }

    updateCartCount();
    markAddedProducts();
  </script>
</body>
</html>
